<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHAT'S YOUR WEIGHT? - AI Fitness Coach v3.0</title>
    <style>
        :root {
            --primary: #27ae60; --secondary: #2980b9; --accent: #8e44ad; --dark: #2c3e50; 
            --light: #f8f9fa; --danger: #e74c3c; --success: #2ecc71; --warning: #f1c40f;
        }
        body { font-family: 'Inter', 'Segoe UI', sans-serif; background: #f0f2f5; color: var(--dark); margin: 0; line-height: 1.6; }
        .container { max-width: 1200px; margin: 40px auto; background: white; border-radius: 30px; box-shadow: 0 30px 100px rgba(0,0,0,0.1); overflow: hidden; }
        
        header { background: linear-gradient(135deg, #11998e, #38ef7d); color: white; padding: 80px 20px; text-align: center; }
        header h1 { margin: 0; font-size: 3.5rem; text-transform: uppercase; letter-spacing: 5px; font-weight: 900; text-shadow: 3px 3px 6px rgba(0,0,0,0.2); }
        header p { font-size: 1.1rem; opacity: 0.9; margin-top: 10px; font-weight: 300; }
        
        main { padding: 40px 60px; }
        .step { display: none; animation: fadeIn 0.6s ease; }
        .step.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h2 { color: var(--secondary); font-size: 1.8rem; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 10px; }

        .grid-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 30px; }
        label { display: block; font-weight: 700; margin-bottom: 8px; color: #444; font-size: 0.85rem; }
        input, select { width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 1rem; transition: 0.3s; box-sizing: border-box; }
        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 12px rgba(39, 174, 96, 0.15); }

        .card-selector { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; margin-bottom: 30px; }
        .card-item { background: #f8f9fa; border: 2px solid #eee; padding: 15px 10px; border-radius: 15px; cursor: pointer; text-align: center; transition: 0.3s; font-weight: 600; font-size: 0.9rem; }
        .card-item:hover { border-color: var(--primary); background: #fff; }
        .card-item.selected { background: var(--primary); color: white; border-color: var(--primary); transform: scale(1.05); box-shadow: 0 8px 15px rgba(39,174,96,0.2); }
        .card-item input { display: none; }

        .btn-group { display: flex; gap: 20px; margin-top: 40px; }
        button { padding: 18px 30px; border: none; border-radius: 50px; cursor: pointer; font-weight: 800; text-transform: uppercase; transition: 0.3s; }
        .btn-next { background: var(--primary); color: white; flex-grow: 2; font-size: 1.1rem; }
        .btn-next:hover { background: #219150; letter-spacing: 1px; }
        .btn-back { background: #eee; color: #666; flex-grow: 1; }

        .stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 20px; text-align: center; border: 1px solid #eee; box-shadow: 0 10px 20px rgba(0,0,0,0.03); }
        .stat-val { font-size: 3rem; font-weight: 900; color: var(--primary); display: block; }
        
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .video-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); text-decoration: none; color: inherit; transition: 0.3s; border: 1px solid #eee; }
        .video-card:hover { transform: translateY(-8px); }
        .thumb { height: 160px; background-size: cover; background-position: center; position: relative; }
        .play-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(231,76,60,0.9); color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .video-info { padding: 15px; font-weight: 700; font-size: 0.95rem; }

        .table-container { background: white; border-radius: 20px; overflow-x: auto; border: 1px solid #eee; margin: 30px 0; }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { background: #f8f9fa; padding: 15px; text-align: left; }
        td { padding: 15px; border-top: 1px solid #eee; }
        .day-label { font-weight: 800; color: var(--primary); }

        .section-title { margin-top: 50px; display: flex; align-items: center; gap: 10px; color: var(--dark); font-weight: 800; text-transform: uppercase; }

        #welcome-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1517836357463-d25dfeac3438?q=80&w=2070&auto=format&fit=crop');
            background-size: cover; background-position: center;
            z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center;
        }
        #welcome-view h1 { font-size: 4rem; letter-spacing: 10px; margin-bottom: 10px; }
        .meal-box { margin-bottom: 5px; font-size: 0.9rem; }
        .meal-tag { color: var(--primary); font-weight: bold; margin-right: 5px; }
    </style>
</head>
<body>

<div id="welcome-view">
    <h1 style="font-weight: 900;">WHAT'S YOUR WEIGHT?</h1>
    <p style="font-size: 1.5rem; max-width: 600px; margin-bottom: 30px;">H·ªá th·ªëng AI ki·∫øn t·∫°o v√≥c d√°ng l√Ω t∆∞·ªüng d√†nh ri√™ng cho b·∫°n.</p>
    <button class="btn-next" style="max-width: 300px;" onclick="document.getElementById('welcome-view').style.display='none'">B·∫ÆT ƒê·∫¶U NGAY</button>
</div>

<div class="container">
    <header>
        <h1>WHAT'S YOUR WEIGHT?</h1>
        <p>H·ªá th·ªëng l·∫≠p tr√¨nh v√≥c d√°ng AI v3.0 - C√° nh√¢n h√≥a m·ª•c ti√™u c·ªßa b·∫°n</p>
    </header>

    <main>
        <div class="step active" id="s1">
            <h2>1. Th√¥ng tin ch·ªâ s·ªë c∆° b·∫£n</h2>
            <div class="grid-inputs">
                <div><label>Gi·ªõi t√≠nh</label><select id="gender"><option value="male">Nam gi·ªõi</option><option value="female">N·ªØ gi·ªõi</option></select></div>
                <div><label>Tu·ªïi</label><input type="number" id="age" value="25"></div>
                <div><label>Chi·ªÅu cao (cm)</label><input type="number" id="height" value="170"></div>
                <div><label>C√¢n n·∫∑ng (kg)</label><input type="number" id="weight" value="70"></div>
            </div>
            <div>
                <label>C∆∞·ªùng ƒë·ªô v·∫≠n ƒë·ªông</label>
                <select id="activity">
                    <option value="1.2">Kh√¥ng t·∫≠p luy·ªán (VƒÉn ph√≤ng/Ch·ªâ n·∫±m/ng·ªìi)</option>
                    <option value="1.375">V·∫≠n ƒë·ªông nh·∫π (Th·ªÉ d·ª•c 1-3 bu·ªïi/tu·∫ßn)</option>
                    <option value="1.55">V·∫≠n ƒë·ªông v·ª´a (T·∫≠p gym 3-5 bu·ªïi/tu·∫ßn)</option>
                    <option value="1.725">V·∫≠n ƒë·ªông n·∫∑ng (T·∫≠p luy·ªán 6-7 bu·ªïi/tu·∫ßn)</option>
                    <option value="1.9">C·ª±c n·∫∑ng (T·∫≠p luy·ªán c∆∞·ªùng ƒë·ªô cao 2 l·∫ßn/ng√†y)</option>
                </select>
            </div>
            <div class="btn-group"><button class="btn-next" onclick="go(1, 2)">Ti·∫øp theo: M·ª•c ti√™u chi ti·∫øt</button></div>
        </div>

        <div class="step" id="s2">
            <h2>2. V√πng c∆° th·ªÉ & Ph∆∞∆°ng ph√°p t·∫≠p</h2>
            <div class="grid-inputs">
                <div><label>C√¢n n·∫∑ng m·ª•c ti√™u (kg)</label><input type="number" id="targetW" value="65"></div>
                <div><label>Th·ªùi gian (Tu·∫ßn)</label><input type="number" id="duration" value="12"></div>
            </div>

            <label>Ch·ªçn c√°c v√πng c∆° th·ªÉ mu·ªën t·∫≠p trung:</label>
            <div class="card-selector" id="focusArea">
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="abs">C∆° b·ª•ng / Eo</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="chest">C∆° ng·ª±c</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="back">C∆° l∆∞ng / X√¥</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="shoulder">Vai thon / R·ªông</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="arms">B·∫Øp tay</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="glutes">M√¥ng (V√≤ng 3)</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="thighs">ƒê√πi trong / ngo√†i</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="calves">B·∫Øp ch√¢n</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="collarbone">X∆∞∆°ng quai xanh</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="fullbody">To√†n th√¢n</div>
            </div>

            <label>Ph∆∞∆°ng ph√°p luy·ªán t·∫≠p:</label>
            <div class="card-selector" id="workoutType">
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="gym">Gym (T·∫°/M√°y)</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="calisthenics">Bodyweight</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="hiit">HIIT / Tabata</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="yoga">Yoga / Pilates</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="cardio">Ch·∫°y b·ªô / ƒê·∫°p xe</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="dance">Nh·∫£y / Zumba</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="office">B√†i t·∫≠p VƒÉn ph√≤ng</div>
            </div>

            <div class="btn-group">
                <button class="btn-back" onclick="go(2, 1)">Quay l·∫°i</button>
                <button class="btn-next" onclick="go(2, 3)">Ti·∫øp theo: Dinh d∆∞·ª°ng</button>
            </div>
        </div>

        <div class="step" id="s3">
            <h2>3. Ch·∫ø ƒë·ªô ƒÉn u·ªëng & L·ªãch tr√¨nh</h2>
            <div class="grid-inputs">
                <div>
                    <label>Ch·∫ø ƒë·ªô ƒÉn mong mu·ªën:</label>
                    <select id="dietType">
                        <option value="eatclean">Eat Clean (S·∫°ch, √≠t ch·∫ø bi·∫øn)</option>
                        <option value="balanced">C√¢n b·∫±ng truy·ªÅn th·ªëng</option>
                        <option value="keto">Keto (Nhi·ªÅu b√©o, c·ª±c th·∫•p Carb)</option>
                        <option value="lowcarb">Low Carb (H·∫°n ch·∫ø tinh b·ªôt)</option>
                        <option value="intermittent">Nh·ªãn ƒÉn gi√°n ƒëo·∫°n (16/8)</option>
                        <option value="vegan">Thu·∫ßn chay (Vegan)</option>
                        <option value="mediterranean">ƒê·ªãa Trung H·∫£i</option>
                    </select>
                </div>
                <div><label>S·ªë b·ªØa ƒÉn/ng√†y</label><input type="number" id="mealCount" value="3"></div>
            </div>

            <label>L·ªãch t·∫≠p (Ch·ªçn nh·ªØng ng√†y b·∫°n r·∫£nh):</label>
            <div class="card-selector" id="freeDays">
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Th·ª© 2">T2</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Th·ª© 3">T3</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Th·ª© 4">T4</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Th·ª© 5">T5</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Th·ª© 6">T6</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Th·ª© 7">T7</div>
                <div class="card-item" onclick="sel(this)"><input type="checkbox" value="Ch·ªß Nh·∫≠t">CN</div>
            </div>

            <div class="btn-group">
                <button class="btn-back" onclick="go(3, 2)">Quay l·∫°i</button>
                <button class="btn-next" onclick="finish()">T·∫†O L·ªò TR√åNH NGAY</button>
            </div>
        </div>

        <div class="step" id="s4">
            <div id="finalOutput"></div>
            <button class="btn-back" onclick="location.reload()" style="width:100%; margin-top:30px">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
        </div>
    </main>
</div>

<script>
    function go(c, n) { 
        document.getElementById('s'+c).classList.remove('active'); 
        document.getElementById('s'+n).classList.add('active'); 
        window.scrollTo(0,0); 
    }
    function sel(el) { 
        el.classList.toggle('selected'); 
        let cb = el.querySelector('input'); 
        cb.checked = !cb.checked; 
    }

    const videoDatabase = {
        abs: [{id:'ml6cT4AZdqI', t:'10 Ph√∫t C∆° B·ª•ng S·ªë 11'}, {id:'2MoGxae-zyo', t:'B·ª•ng D∆∞·ªõi Th·∫ßn T·ªëc'}],
        chest: [{id:'lWXhih3xbKc', t:'B√†i t·∫≠p Ng·ª±c t·∫°i nh√†'}, {id:'vthMCtgVtFw', t:'Chest Workout for Mass'}],
        back: [{id:'hbdS-D_pYFk', t:'L∆∞ng X√¥ V-Taper'}, {id:'EGoV_P_8M_U', t:'H·∫øt g√π l∆∞ng hi·ªáu qu·∫£'}],
        glutes: [{id:'U9ENCvRPHKw', t:'M√¥ng qu·∫£ ƒë√†o kh√¥ng to ƒë√πi'}],
        hiit: [{id:'ml6cT4AZdqI', t:'Tabata 4 ph√∫t c·ª±c cƒÉng'}],
        yoga: [{id:'Nnd5Slo02us', t:'Yoga cho ng∆∞·ªùi m·ªõi'}],
        fullbody: [{id:'jy0O6_ByMUI', t:'ƒê·ªët m·ª° to√†n th√¢n 20p'}]
    };

    const menus = {
        eatclean: [
            {s: "Y·∫øn m·∫°ch, chu·ªëi, h·∫°t chia", t: "·ª®c g√† √°p ch·∫£o, c∆°m l·ª©t, s√∫p l∆°", o: "C√° h·ªìi n∆∞·ªõng, salad rau bina"},
            {s: "Sinh t·ªë b∆°, tr·ª©ng lu·ªôc", t: "Th·ªãt b√≤ x√†o rau c·ªß, b√∫n l·ª©t", o: "T√¥m h·∫•p, canh c·∫£i xanh"},
            {s: "S·ªØa chua Hy L·∫°p, d√¢u t√¢y", t: "C√° thu n∆∞·ªõng, khoai lang h·∫•p", o: "G√† lu·ªôc x√© phay, salad d∆∞a chu·ªôt"},
            {s: "B√°nh m√¨ ƒëen, tr·ª©ng ·ªëp la", t: "M·ª±c x√†o h√†nh c·∫ßn, c∆°m l·ª©t", o: "ƒê·∫≠u h≈© s·ªët c√† chua, canh b√≠"},
            {s: "Khoai lang lu·ªôc, s·ªØa h·∫°t", t: "Th·ªãt heo n·∫°c lu·ªôc, b√≠ ng√≤i", o: "C√° phi l√™ √°p ch·∫£o, mƒÉng t√¢y"},
            {s: "Pancake y·∫øn m·∫°ch, m·∫≠t ong", t: "T√¥m rim m·∫∑n ng·ªçt, c∆°m l·ª©t", o: "S√∫p g√† ng√¥ non, n·∫•m"},
            {s: "Ng≈© c·ªëc nguy√™n c√°m, t√°o", t: "L·∫©u n·∫•m rau c·ªß, b√∫n l·ª©t", o: "Ch√°o y·∫øn m·∫°ch th·ªãt bƒÉm"}
        ],
        balanced: [
            {s: "Ph·ªü b√≤, rau s·ªëng", t: "C∆°m tr·∫Øng, th·ªãt kho t√†u, canh rau", o: "B√∫n ch·∫£ H√† N·ªôi, rau th∆°m"},
            {s: "B√°nh m√¨ k·∫πp tr·ª©ng, pate", t: "C∆°m, g√† rang g·ª´ng, canh b√≠ ƒë·ªè", o: "C√° r√°n, rau mu·ªëng lu·ªôc"},
            {s: "B√∫n ri√™u cua, b·∫Øp chu·ªëi", t: "C∆°m, s∆∞·ªùn x√†o chua ng·ªçt, rau c·∫£i", o: "Th·ªãt lu·ªôc, ƒë·∫≠u r√°n, canh chua"},
            {s: "X√¥i x√©o, ru·ªëc, h√†nh phi", t: "C∆°m, t√¥m rim, canh m·ªìng t∆°i", o: "M√¨ x√†o b√≤, rau c·∫£i"},
            {s: "H·ªß ti·∫øu Nam Vang", t: "C∆°m, th·ªãt heo kho mƒÉng, rau s·ªëng", o: "Ph·ªü g√†, qu·∫©y"},
            {s: "B√°nh cu·ªën thanh tr√¨, ch·∫£", t: "C∆°m, c√° thu s·ªët c√†, canh rau ng√≥t", o: "N·ªôm g√† x√© phay, ch√°o th·ªãt"},
            {s: "B√∫n b√≤ Hu·∫ø", t: "C∆°m gia ƒë√¨nh, th·ª©c ƒÉn t·ªïng h·ª£p", o: "Mi·∫øn g√†, rau th∆°m"}
        ],
        keto: [
            {s: "Tr·ª©ng x√†o b∆°, ba ch·ªâ hun kh√≥i", t: "ƒê√πi g√† chi√™n b∆°, mƒÉng t√¢y", o: "C√° h·ªìi √°p ch·∫£o ph√¥ mai"},
            {s: "Omelet 3 tr·ª©ng, x√∫c x√≠ch", t: "B√≤ bit t·∫øt, s√∫p l∆° tr·∫Øng x√†o", o: "Th·ªãt ba ch·ªâ lu·ªôc, salad mayonnaise"},
            {s: "C√† ph√™ b∆° (Bulletproof)", t: "T√¥m x√†o t·ªèi, c·∫£i b√≥ x√¥i", o: "S∆∞·ªùn n∆∞·ªõng, b√¥ng c·∫£i xanh"},
            {s: "Salad tr·ª©ng, qu·∫£ b∆°, h·∫°t h·∫°nh nh√¢n", t: "G√† n∆∞·ªõng da gi√≤n, rau x√† l√°ch", o: "M·ª±c h·∫•p, s·ªët ch·∫•m b√©o"},
            {s: "Tr·ª©ng lu·ªôc, ph√¥ mai mi·∫øng", t: "Th·ªãt b√≤ cu·ªôn n·∫•m kim ch√¢m", o: "C√° thu chi√™n m·ª° l·ª£n"},
            {s: "S·ªØa h·∫°nh nh√¢n kh√¥ng ƒë∆∞·ªùng", t: "Gi√≤ heo h·∫ßm s√∫p l∆°", o: "Th·ªãt heo quay, d∆∞a chu·ªôt"},
            {s: "Tr·ª©ng h·∫•p th·ªãt bƒÉm", t: "L·∫©u th√°i Keto (nhi·ªÅu ƒë·∫°m/b√©o)", o: "Th·ªãt n∆∞·ªõng, salad qu·∫£ b∆°"}
        ],
        lowcarb: [
            {s: "2 tr·ª©ng lu·ªôc, 1 qu·∫£ t√°o", t: "·ª®c g√† √°p ch·∫£o, salad th·∫≠p c·∫©m", o: "Th·ªãt b√≤ bƒÉm, canh rau c·∫£i"},
            {s: "S·ªØa chua kh√¥ng ƒë∆∞·ªùng, h·∫°t h·∫°nh nh√¢n", t: "T√¥m x√†o n·∫•m, b√¥ng c·∫£i tr·∫Øng", o: "C√° phi l√™ n∆∞·ªõng, rau m·∫ßm"},
            {s: "B√°nh m√¨ ƒëen (1 l√°t), tr·ª©ng", t: "Th·ªãt heo lu·ªôc, ƒë·∫≠u b·∫Øp", o: "G√† x√†o s·∫£ ·ªõt, canh b√≠"},
            {s: "Tr·ª©ng cu·ªôn rau c·ªß", t: "M·ª±c h·∫•p h√†nh t√≠m, x√† l√°ch", o: "C√° h·ªìi n∆∞·ªõng mu·ªëi ti√™u"},
            {s: "Sinh t·ªë protein, d√¢u t√¢y", t: "B√≤ x√†o thi√™n l√Ω, canh rong bi·ªÉn", o: "T√¥m n∆∞·ªõng, salad d·∫ßu gi·∫•m"},
            {s: "Khoai lang nh·ªè (1 c·ªß), tr·ª©ng", t: "Th·ªãt g√† kho g·ª´ng, rau lu·ªôc", o: "ƒê·∫≠u ph·ª• lu·ªôc, th·ªãt n·∫°c"},
            {s: "S·ªØa h·∫°t, h·∫°t ƒëi·ªÅu", t: "Canh x∆∞∆°ng h·∫ßm rau c·ªß", o: "Salad c√° ng·ª´, tr·ª©ng"}
        ],
        vegan: [
            {s: "B√°nh m√¨ nguy√™n c√°m, b∆° ƒë·∫≠u ph·ªông", t: "ƒê·∫≠u h≈© kho n·∫•m, c∆°m l·ª©t", o: "Canh rong bi·ªÉn, ƒë·∫≠u ph·ª• tr·∫Øng"},
            {s: "Y·∫øn m·∫°ch s·ªØa ƒë·∫≠u n√†nh", t: "B√∫n x√†o rau c·ªß, l·∫°c rang", o: "Salad ƒë·∫≠u H√† Lan, b·∫Øp ng·ªçt"},
            {s: "Khoai lang lu·ªôc, s·ªØa h·∫°t", t: "M√¨ l·ª©t s·ªët c√† chua n·∫•m", o: "G·ªèi cu·ªën rau c·ªß, ƒë·∫≠u h≈©"},
            {s: "Sinh t·ªë b∆°, chu·ªëi", t: "C∆°m l·ª©t, m√≠t non kho", o: "S√∫p b√≠ ƒë·ªè, h·∫°t b√≠"},
            {s: "B√∫n x√†o ngh·ªá chay", t: "ƒê·∫≠u ve x√†o n·∫•m, canh chua chay", o: "Ch·∫£ gi√≤ chay, rau s·ªëng"},
            {s: "H·∫°t h·∫°nh nh√¢n, qu·∫£ t√°o", t: "Mi·∫øn x√†o m·ªôc nhƒ©, rau c·∫£i", o: "ƒê·∫≠u h≈© s·ªët me, c∆°m l·ª©t"},
            {s: "Ph·ªü chay, n·∫•m, ƒë·∫≠u ph·ª•", t: "L·∫©u n·∫•m th·∫≠p c·∫©m", o: "Ch√°o ƒë·∫≠u xanh, n·∫•m"}
        ],
        mediterranean: [
            {s: "S·ªØa chua, m·∫≠t ong, h·∫°t √≥c ch√≥", t: "C√° n∆∞·ªõng, salad Hy L·∫°p", o: "Pasta ng≈© c·ªëc nguy√™n h·∫°t, t√¥m"},
            {s: "Tr·ª©ng ·ªëp la, d·∫ßu oliu, c√† chua", t: "G√† n∆∞·ªõng chanh, b√°nh m√¨ nguy√™n c√°m", o: "Salad c√° ng·ª´, oliu, ƒë·∫≠u n√†nh"},
            {s: "Ng≈© c·ªëc t√°o, s·ªØa √≠t b√©o", t: "C∆°m c√° h·ªìi, rau m·∫ßm", o: "S√∫p ƒë·∫≠u lƒÉng, b√°nh m√¨"},
            {s: "Tr√°i c√¢y kh√¥, h·∫°t ƒëi·ªÅu", t: "M·ª±c n∆∞·ªõng, salad cam, rau xanh", o: "G√† h·∫ßm rau c·ªß ki·ªÉu ƒê·ªãa Trung H·∫£i"},
            {s: "B√°nh m√¨ ƒëen k·∫πp b∆°, tr·ª©ng", t: "Pasta t√¥m s·ªët t·ªèi d·∫ßu oliu", o: "C√° thu n∆∞·ªõng mƒÉng t√¢y"},
            {s: "Sinh t·ªë d√¢u, chu·ªëi, s·ªØa h·∫°t", t: "T√¥m n∆∞·ªõng mu·ªëi, rau c·ªß tr·ªôn", o: "ƒê·∫≠u tr·∫Øng h·∫ßm, rau xanh"},
            {s: "Tr·ª©ng ch·∫ßn, b√°nh m√¨, oliu", t: "C∆°m h·∫£i s·∫£n ƒê·ªãa Trung H·∫£i", o: "C√° n∆∞·ªõng, khoai t√¢y nh·ªè"}
        ],
        intermittent: [
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "C∆°m l·ª©t, th·ªãt heo n·∫°c, rau", o: "·ª®c g√†, khoai lang, x√† l√°ch"},
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "Ph·ªü b√≤, tr√°i c√¢y", o: "C√° n∆∞·ªõng, b√¥ng c·∫£i, c∆°m"},
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "B√∫n th·ªãt n∆∞·ªõng, rau s·ªëng", o: "T√¥m rim, s√∫p l∆°, c∆°m l·ª©t"},
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "M√¨ x√†o b√≤, sinh t·ªë b∆°", o: "G√† n∆∞·ªõng, salad, ƒë·∫≠u h≈©"},
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "C∆°m, c√° kho, canh rau", o: "Th·ªãt lu·ªôc, tr·ª©ng, rau m·∫ßm"},
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "B√∫n c√°, tr√°i c√¢y t∆∞∆°i", o: "H·∫£i s·∫£n h·∫•p, rau xanh"},
            {s: "Nh·ªãn (Giai ƒëo·∫°n Fasting)", t: "L·∫©u gia ƒë√¨nh", o: "Ch√°o th·ªãt bƒÉm, y·∫øn m·∫°ch"}
        ]
    };

    function finish() {
        const w = parseFloat(document.getElementById('weight').value);
        const h = parseFloat(document.getElementById('height').value);
        const targetW = parseFloat(document.getElementById('targetW').value);
        const age = parseInt(document.getElementById('age').value);
        const act = parseFloat(document.getElementById('activity').value);
        const diet = document.getElementById('dietType').value;
        const duration = parseInt(document.getElementById('duration').value);

        const bmi = (w / ((h/100)*(h/100))).toFixed(1);
        let bmr = (10 * w) + (6.25 * h) - (5 * age);
        bmr = (document.getElementById('gender').value === 'male') ? bmr + 5 : bmr - 161;
        const tdee = Math.round(bmr * act);
        const deficit = ((w - targetW) * 7700) / (duration * 7);
        let goalC = Math.round(tdee - deficit);
        if(goalC < 1200) goalC = 1200;

        const fAreas = Array.from(document.querySelectorAll('#focusArea .selected')).map(e => e.querySelector('input').value);
        const wTypes = Array.from(document.querySelectorAll('#workoutType .selected')).map(e => e.querySelector('input').value);

        let html = `
            <h2 style="color:var(--primary)">K·∫æT QU·∫¢ D√ÄNH CHO B·∫†N</h2>
            <div class="stat-grid">
                <div class="stat-card"><span>BMI Hi·ªán t·∫°i</span><span class="stat-val">${bmi}</span></div>
                <div class="stat-card"><span>Calo m·ª•c ti√™u</span><span class="stat-val">${goalC}</span><p>kcal/ng√†y</p></div>
                <div class="stat-card"><span>C·∫ßn gi·∫£m</span><span class="stat-val" style="color:var(--danger)">${(w-targetW).toFixed(1)}</span><p>kg trong ${duration} tu·∫ßn</p></div>
            </div>

            <h3 class="section-title">üçΩÔ∏è Th·ª±c ƒë∆°n chi ti·∫øt 7 ng√†y (${diet.toUpperCase()})</h3>
            <div class="table-container">
                <table>
                    <tr><th>Th·ª©</th><th>G·ª£i √Ω b·ªØa ƒÉn ti√™u bi·ªÉu</th></tr>
                    ${["Th·ª© 2","Th·ª© 3","Th·ª© 4","Th·ª© 5","Th·ª© 6","Th·ª© 7","Ch·ªß Nh·∫≠t"].map((day, i) => {
                        const dayMenu = menus[diet][i];
                        return `
                        <tr>
                            <td class="day-label">${day}</td>
                            <td>
                                <div class="meal-box"><span class="meal-tag">S√°ng:</span> ${dayMenu.s}</div>
                                <div class="meal-box"><span class="meal-tag">Tr∆∞a:</span> ${dayMenu.t}</div>
                                <div class="meal-box"><span class="meal-tag">T·ªëi:</span> ${dayMenu.o}</div>
                            </td>
                        </tr>`;
                    }).join('')}
                </table>
            </div>

            <h3 class="section-title">üé¨ Video h∆∞·ªõng d·∫´n theo m·ª•c ti√™u</h3>
            <div class="video-grid">
        `;

        const allKeys = [...fAreas, ...wTypes];
        const addedV = new Set();
        allKeys.forEach(k => {
            if(videoDatabase[k]) {
                videoDatabase[k].forEach(v => {
                    if(!addedV.has(v.id)) {
                        html += `
                            <a href="https://www.youtube.com/watch?v=${v.id}" target="_blank" class="video-card">
                                <div class="thumb" style="background-image: url('https://img.youtube.com/vi/${v.id}/mqdefault.jpg')">
                                    <div class="play-btn">‚ñ∂</div>
                                </div>
                                <div class="video-info">${v.t}</div>
                            </a>
                        `;
                        addedV.add(v.id);
                    }
                });
            }
        });

        html += `</div>`;
        document.getElementById('finalOutput').innerHTML = html;
        go(3, 4);
    }
</script>

</body>
</html>